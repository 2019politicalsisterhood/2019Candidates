{% extends 'base.html' %}

{% block content %}
<section id="page-title">
  <div class="container clearfix">
    <h1>Search</h1>
    <span>Use this search to find out more about our candidates!</span>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="#">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">Search</li>
    </ol>
  </div>
</section>
<section id="content" style="margin-bottom: 0px;">
  <div class="content-wrap">
    <div class="container clearfix">
      <!-- Post Content
                    ============================================= -->
      <div class="postcontent nobottommargin col_last clearfix">
        <form method="get" action="">
            <div class="form-group">
                <div class="col-sm-12 nopadding">
                    <input type="search" name="q" value="{{query}}" class="form-control theme"  placeholder="Search" id="id_q">
                </div>
            </div>
            <div>
                {% for result in page_obj.object_list %}
                         <article class="portfolio-item pf-media pf-icons">
                            <div class="portfolio-image">
                                <a href="{{result.object.get_absolute_url}}">
                                    <img src="{{result.object.image_url}}" alt="{{result.object.name}} Headshot">
                                </a>
                              <div class="portfolio-overlay">
                                <a href="{{result.object.get_absolute_url}}" class="center-icon"><i class="icon-line-link"></i></a>
                              </div>
                            </div>
                            <div class="portfolio-desc">
                              <h3><a href="{{result.object.get_absolute_url}}">{{result.object.first_name}} {{result.object.last_name}}</a></h3>
                              <a href="{% url 'candidate:state' result.object.state|lower %}">{{result.object.state}}</a>{% if result.object.office and result.object.state %}<span class="middot">Â·</span>{% endif %}<a href="#">{{result.object.office}}</a>
                            </div>
                          </article>
                {% empty %}
                    <p>No results found.</p>
                {% endfor %}

                {% if page.has_previous or page.has_next %}
                    <div>
                        {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
                        |
                        {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
                    </div>
                {% endif %}
            </div>
      </div>
      <!-- .postcontent end -->
      <!-- Sidebar
                    ============================================= -->
      <div class="sidebar nobottommargin clearfix">
        <div class="sidebar-widgets-wrap">
          <div class="widget subscribe-widget clearfix">
            <div class="theme">
                <div class="bottompadding-sm">
                      <div class="fancy-title title-border">
                        <h4>Political Party</h4>
                      </div>
                      {{form.party}}
                </div>
                <div class="bottompadding-sm">
                      <div class="fancy-title title-border">
                        <h4>Issues</h4>
                      </div>
                      {{form.issues}}
                </div>
                <div class="bottompadding-sm">
                      <div class="fancy-title title-border">
                        <h4>Education</h4>
                      </div>
                      {{form.college}}
                </div>
                <div class="bottompadding-sm">
                      <div class="fancy-title title-border">
                        <h4>State</h4>
                      </div>
                      {{form.state}}
                </div>
                <button type="submit" class="button button-3d button-large">Search</button>
            </div>
          </div>
        </div>
      </div>
      <!-- .sidebar end -->
    </form>
    </div>
  </div>
</section>
{% endblock %}
{% block extra_js %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
<script type="text/javascript">
$('#id_party').select2({
    placeholder: 'Select a political party',
    width: '100%',
});
$('#id_college').select2({
    placeholder: 'Select an institution',
    width: '100%',
});
$('#id_state').select2({
    placeholder: 'Select a state',
    width: '100%',
});
$('#id_issues').select2({
    placeholder: 'Select a state',
    width: '100%',
});
</script>
{% endblock %}